<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="ä¸€ç›´æ¸¸åˆ°æµ·æ°´å˜è“">
    <meta name="author" content="Flow">
    
    <title>
        
            javaååºåˆ—åŒ–åŸºç¡€ä¹‹ç±»åŠ è½½ |
        
        Flowww&#39;s blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.xml"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"Flowww's blog","author":"Flow","avatar":"https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png","logo":"https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png","favicon":"https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png"},"menu":{"home":"/","archives":"/archives","tags":"/tags","about":"/about"},"first_screen":{"enable":true,"background_img":"https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/20250112172909.png","background_img_dark":"/images/bg.svg","description":"ä¸€ç›´æ¸¸åˆ°æµ·æ°´å˜è“","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":null,"category":false,"tag":true,"post_datetime":"created"},"post":{"author_badge":{"enable":false,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":true,"min2read":false},"datetime_format":"YYYY-MM-DD","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null}},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"toc":{"enable":true,"number":true,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":true,"site_uv":false,"site_pv":false,"page_pv":true}},"search":{"path":"search.json","field":"post","content":true,"format":"striptags"},"local_search":{"enable":true,"preload":true},"comment":{"enable":true,"use":"valine","valine":{"appid":"E3FHp0QEVFhY7p13mQXePdYC-gzGzoHsz","appkey":"hJxnDaGeKNxkzn9GLQS6pJD4","placeholder":"ç•™ä¸‹ä½ çš„è¯„è®ºï½","recordIP":true,"avatar":"robohash","avatar_cdn":"https://cravatar.cn/avatar/"},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.21"},"waline":{"server_url":null,"reaction":false,"version":2},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":false,"icp":{"enable":false,"record_code":null,"url":"https://beian.miit.gov.cn"},"site_deploy":{"enable":false,"provider":"github","url":null},"shields_style":{"enable":false,"custom":[{"link_url":null,"img_url":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.1.0"}
    KEEP.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"}
    KEEP.language_code_block = {"copy":"å¤åˆ¶ä»£ç ","copied":"å·²å¤åˆ¶","fold":"æŠ˜å ä»£ç å—","folded":"å·²æŠ˜å "}
    KEEP.language_copy_copyright = {"copy":"å¤åˆ¶ç‰ˆæƒä¿¡æ¯","copied":"å·²å¤åˆ¶","title":"åŸæ–‡æ ‡é¢˜","author":"åŸæ–‡ä½œè€…","link":"åŸæ–‡é“¾æ¥"}
  </script>
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png">
                </a>
            
            <a class="site-name border-box" href="/">
               Flowww&#39;s blog
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                
                                å½’æ¡£
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                
                                å…³äº
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/"
                    >é¦–é¡µ</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >å½’æ¡£</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags"
                    >æ ‡ç­¾</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about"
                    >å…³äº</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        javaååºåˆ—åŒ–åŸºç¡€ä¹‹ç±»åŠ è½½
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/aaa.png">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">Flow</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2025-02-14</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Fri Feb 14 2025 16:21:19 GMT+0800">2025-02-14</span>
            </span>
        

        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/java/">java</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
            <span class="meta-info-item post-pv">
                <i class="icon fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
            </span>
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body">
                    

                    <h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>ccé“¾çœ‹åˆ°cc3ï¼Œæ¶‰åŠåˆ°ç±»åŠ è½½ï¼Œä¹‹å‰å›«å›µåæ£åœ°å­¦äº†äº›ï¼Œè¿˜æ˜¯ä¸å¤Ÿç‰¢å›ºã€‚äºæ˜¯å†™ç¯‡ç¬”è®°ç»™è‡ªå·±ç†æ¸…æ¥šã€‚å‚è€ƒäº†å¾ˆå¤šå‰è¾ˆçš„æ–‡ç« ï¼Œæ„Ÿè°¢ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸å¯¹çš„ï¼Œæ¬¢è¿æ‰¾æˆ‘æŒ‡æ­£ğŸ™</p>
<h4 id="Javaç±»åŠ è½½æœºåˆ¶"><a href="#Javaç±»åŠ è½½æœºåˆ¶" class="headerlink" title="Javaç±»åŠ è½½æœºåˆ¶"></a>Javaç±»åŠ è½½æœºåˆ¶</h4><p>å€Ÿç”¨ç½‘ä¸Šä¸€å¼ å›¾</p>
<img     src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/20250214132308.png"   style="zoom:50%;" >

<p>.java ç¼–è¯‘åç”Ÿæˆ .classæ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œclassæ–‡ä»¶ï¼Œå°±éœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„ç”Ÿå‘½å‘¨æœŸå’Œåˆå§‹åŒ–æ“ä½œï¼Œæœ€åç›®çš„å°±æ˜¯è®©JVMæˆåŠŸæ‰§è¡Œã€‚</p>
<p>çœ‹è¿™ä¸ªæµç¨‹å›¾å°±çŸ¥é“<strong>ç±»çš„åŠ è½½å°±æ˜¯ç”±javaç±»åŠ è½½å™¨å®ç°çš„ï¼Œä½œç”¨å°†ç±»æ–‡ä»¶è¿›è¡ŒåŠ¨æ€åŠ è½½åˆ°javaè™šæ‹Ÿæœºå†…å­˜ä¸­è¿è¡Œã€‚</strong></p>
<h4 id="å‡ ä¸ªç±»åŠ è½½å™¨"><a href="#å‡ ä¸ªç±»åŠ è½½å™¨" class="headerlink" title="å‡ ä¸ªç±»åŠ è½½å™¨"></a>å‡ ä¸ªç±»åŠ è½½å™¨</h4><h5 id="BootstrapClassLoader"><a href="#BootstrapClassLoader" class="headerlink" title="BootstrapClassLoader"></a>BootstrapClassLoader</h5><p>è¿™ä¸ªä¹Ÿå«å¼•å¯¼ç±»åŠ è½½å™¨ï¼Œæ¯”è¾ƒåº•å±‚ï¼Œç”±C++ä»£ç ç¼–å†™ï¼Œå±äºJVMçš„ä¸€éƒ¨åˆ†ã€‚ä¸ç»§æ‰¿ <code>java.lang.ClassLoader</code> ç±»ï¼Œä¹Ÿæ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œä¸»è¦è´Ÿè´£åŠ è½½æ ¸å¿ƒ java åº“(å³ JVM æœ¬èº«)ï¼Œå­˜å‚¨åœ¨ <code>/jre/lib/rt.jar</code> ç›®å½•å½“ä¸­ã€‚(åŒæ—¶å¤„äºå®‰å…¨è€ƒè™‘ï¼Œ<code>BootstrapClassLoader</code> åªåŠ è½½åŒ…åä¸º <code>java</code>ã€<code>javax</code>ã€<code>sun</code> ç­‰å¼€å¤´çš„ç±»)ã€‚</p>
<h5 id="ExtensionsClassLoader"><a href="#ExtensionsClassLoader" class="headerlink" title="ExtensionsClassLoader"></a>ExtensionsClassLoader</h5><p>ä¹Ÿå«æ‹“å±•ç±»åŠ è½½å™¨ï¼Œç”± <code>sun.misc.Launcher$ExtClassLoader</code> ç±»å®ç°ï¼Œç”¨æ¥åœ¨ <code>/jre/lib/ext</code> æˆ–è€… <code>java.ext.dirs</code> ä¸­æŒ‡æ˜çš„ç›®å½•åŠ è½½ java çš„æ‰©å±•åº“ã€‚Java è™šæ‹Ÿæœºä¼šæä¾›ä¸€ä¸ªæ‰©å±•åº“ç›®å½•ï¼Œæ­¤åŠ è½½å™¨åœ¨ç›®å½•é‡Œé¢æŸ¥æ‰¾å¹¶åŠ è½½ java ç±»ã€‚</p>
<h5 id="AppClassLoader"><a href="#AppClassLoader" class="headerlink" title="AppClassLoader"></a>AppClassLoader</h5><p>Appç±»åŠ è½½å™¨&#x2F;ç³»ç»Ÿç±»åŠ è½½å™¨ï¼ˆAppClassLoaderï¼‰ï¼Œç”± <code>sun.misc.Launcher$AppClassLoader</code> å®ç°ï¼Œä¸€èˆ¬é€šè¿‡( <code>java.class.path</code> æˆ–è€… <code>Classpath</code> ç¯å¢ƒå˜é‡)æ¥åŠ è½½ Java ç±»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ classpath è·¯å¾„ã€‚é€šå¸¸æˆ‘ä»¬æ˜¯ä½¿ç”¨è¿™ä¸ªåŠ è½½ç±»æ¥åŠ è½½ Java åº”ç”¨ç±»ï¼Œå¯ä»¥ä½¿ç”¨ <code>ClassLoader.getSystemClassLoader()</code> æ¥è·å–å®ƒã€‚</p>
<h5 id="UserDefineClassLoader"><a href="#UserDefineClassLoader" class="headerlink" title="UserDefineClassLoader"></a>UserDefineClassLoader</h5><p>é™¤äº†ä¸Šé¢è¯´çš„ä¸‰ç§ï¼Œç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡ç»§æ‰¿<code>java.lang.ClassLoader</code>ç±»çš„æ–¹å¼å®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚</p>
<p>æˆ‘ä»¬ä»‹ç»çš„å‡ ä¸ªClassLoaderä¹‹é—´æœ‰çˆ¶å­å…³ç³»ï¼ˆä¸æ˜¯ç»§æ‰¿ï¼‰ï¼Œåœ¨Java.lang.ClassLoaderé‡Œé¢å®šä¹‰äº†æŒ‡å‘çˆ¶åŠ è½½å™¨çš„å¸¸é‡ parent, å¯ä»¥é€šè¿‡è°ƒç”¨ getParent() æ–¹æ³•è·å–çˆ¶åŠ è½½å™¨ã€‚å¯ä»¥çœ‹ä¸€ä¸ªä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoaderTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(ClassLoader.getSystemClassLoader());</span><br><span class="line">        System.out.println(ClassLoader.getSystemClassLoader().getParent());</span><br><span class="line">        System.out.println(ClassLoader.getSystemClassLoader().getParent().getParent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°å‡ºæ¥æ˜¯ï¼ˆè¿™é‡Œçš„nullå…¶å®å°±æ˜¯BootstrapClassLoaderï¼Œå› ä¸ºæ˜¯c++å®ç°çš„ï¼Œæ‰€ä»¥æ— æ³•åœ¨javaä¸­è·å–åˆ°ç›¸åº”çš„å¼•ç”¨ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sun.misc.Launcher$AppClassLoader@5ce65a89</span><br><span class="line">sun.misc.Launcher$ExtClassLoader@1edf1c96</span><br><span class="line">null</span><br></pre></td></tr></table></figure>

<p>å‡ ä¸ªClassLoaderå…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img   src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/20250214141003.png" ></p>
<p>æ‰€æœ‰ClassLoaderéƒ½ç»§æ‰¿è‡ª<code>java.lang.ClassLoader</code> è¿™ä¸ªæŠ½è±¡ç±»ï¼Œ ExtClassLoader å’Œ AppClassLoader ç»§æ‰¿è‡ª <code>URLClassLoader</code>ï¼Œ <code>URLClassLoader</code>æ—¢å¯ä»¥åŠ è½½æœ¬åœ°å­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥åŠ è½½è¿œç¨‹å­—èŠ‚ç ã€‚</p>
<p><code>java.lang.ClassLoader</code> æ˜¯æ‰€æœ‰ ClassLoader çš„åŸºçŸ³ï¼Œåœ¨è¿™ä¸ªæŠ½è±¡ç±»ä¸­å®šä¹‰äº†å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•</p>
<ul>
<li>loadClass(): åŸºäºåŒäº²å§”æ´¾æœºåˆ¶æŸ¥æ‰¾ Class, è°ƒç”¨çˆ¶åŠ è½½å™¨çš„ loadClass æ–¹æ³•æˆ–è‡ªèº«çš„ findClass æ–¹æ³•</li>
<li>findClass(): æ ¹æ®åç§°å’Œä½ç½®è¯»å–å­—èŠ‚ç , å¹¶è°ƒç”¨ defineClass æ–¹æ³•, å…·ä½“å®ç°ç”±å­ç±»é‡å†™</li>
<li>defineClass(): æŠŠ byte æ•°ç»„å½¢å¼çš„å­—èŠ‚ç è½¬æ¢æˆå¯¹åº”çš„ Class å¯¹è±¡ (çœŸæ­£åŠ è½½å­—èŠ‚ç çš„åœ°æ–¹)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loadClass() -&gt; findClass() -&gt; defineClass()</span><br></pre></td></tr></table></figure>

<h4 id="åŒäº²å§”æ´¾æœºåˆ¶"><a href="#åŒäº²å§”æ´¾æœºåˆ¶" class="headerlink" title="åŒäº²å§”æ´¾æœºåˆ¶"></a>åŒäº²å§”æ´¾æœºåˆ¶</h4><p>å…ˆè¯´ä¸€ä¸‹classæœ‰ä¸¤ç§åŠ è½½æ–¹å¼</p>
<ul>
<li><p>éšå¼åŠ è½½ï¼šé€šè¿‡ new å®ä¾‹åŒ–ç±», æˆ–é€šè¿‡ <code>ç±»å.æ–¹æ³•å()</code> è°ƒç”¨å…¶é™æ€æ–¹æ³•, æˆ–è°ƒç”¨å…¶é™æ€å±æ€§</p>
</li>
<li><p>æ˜¾å¼åŠ è½½ï¼šé€šè¿‡åå°„çš„å½¢å¼, ä¾‹å¦‚ <code>Class.forName()</code> æˆ–è€…è°ƒç”¨ ClassLoader çš„ loadClass æ–¹æ³•</p>
</li>
</ul>
<p>ç„¶åæˆ‘ä»¬çš„ç±»åŠ è½½åŸºäºåŒäº²å§”æ´¾æœºåˆ¶ï¼š<strong>å½“ä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚çš„æ—¶å€™ï¼Œä»–ä¸ä¼šç›´æ¥å»åŠ è½½æŒ‡å®šçš„ç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™è‡ªå·±çš„çˆ¶åŠ è½½å™¨å»åŠ è½½ã€‚åªæœ‰çˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œæ‰ä¼šç”±å½“å‰è¿™ä¸ªåŠ è½½å™¨æ¥è´Ÿè´£ç±»çš„åŠ è½½</strong></p>
<p>å¯ä»¥çœ‹ä¸€ä¸‹å®ç°ä»£ç ï¼Œ<strong>java.lang.ClassLoaderçš„loadClass()æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">// First, check if the class has already been loaded</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name); <span class="comment">// æ£€æŸ¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½</span></span><br><span class="line">            <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">t0</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">                        c = parent.loadClass(name, <span class="literal">false</span>); <span class="comment">// è°ƒç”¨çˆ¶ç±»çš„loadClassï¼Œå§”æ‰˜ä¸‹ä¸€å±‚</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        c = findBootstrapClassOrNull(name); <span class="comment">// æ­¤æ—¶çˆ¶åŠ è½½å™¨ä¸º BootstrapClassLoader</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                    <span class="comment">// ClassNotFoundException thrown if class not found</span></span><br><span class="line">                    <span class="comment">// from the non-null parent class loader</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// If still not found, then invoke findClass in order</span></span><br><span class="line">                    <span class="comment">// to find the class.</span></span><br><span class="line">                    <span class="type">long</span> <span class="variable">t1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                    c = findClass(name); <span class="comment">// å°è¯•è°ƒç”¨è‡ªå·±çš„ findClass æ–¹æ³•æ¥åŠ è½½ class</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ç®€å•æµç¨‹å°±æ˜¯1ã€å…ˆæ£€æŸ¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡ 2ã€è‹¥æ²¡æœ‰åŠ è½½åˆ™è°ƒç”¨çˆ¶åŠ è½½å™¨çš„loadClass()æ–¹æ³•è¿›è¡ŒåŠ è½½ 3ã€è‹¥çˆ¶åŠ è½½å™¨ä¸ºç©ºåˆ™é»˜è®¤ä½¿ç”¨å¯åŠ¨ç±»åŠ è½½å™¨ä½œä¸ºçˆ¶åŠ è½½å™¨ã€‚ 4ã€å¦‚æœçˆ¶ç±»åŠ è½½å¤±è´¥ï¼ŒæŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸åï¼Œå†è°ƒç”¨è‡ªå·±çš„findClass()æ–¹æ³•è¿›è¡ŒåŠ è½½ã€‚</p>
<h4 id="ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº"><a href="#ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº" class="headerlink" title="ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº"></a>ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº</h4><p>åŸºç¡€è®¤çŸ¥</p>
<ul>
<li>é™æ€ä»£ç å—ï¼š<code>static&#123;&#125;</code></li>
<li>æ„é€ ä»£ç å—ï¼š<code>&#123;&#125;</code></li>
<li>æ— å‚æ„é€ å™¨ï¼š<code>ClassName()</code></li>
<li>æœ‰å‚æ„é€ å™¨ï¼š<code>ClassName(String name)</code></li>
</ul>
<p>å…ˆå†™ä¸€ä¸ªDog.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> staticVar;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> instanceVar;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é™æ€ä»£ç å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ„é€ ä»£ç å—&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Dog()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ— å‚æ„é€ å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Dog(<span class="type">int</span> instanceVar)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æœ‰å‚æ„é€ å™¨&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">staticAction</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é™æ€æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡"><a href="#åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡" class="headerlink" title="åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡"></a>åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é™æ€ä»£ç å—</span><br><span class="line">æ„é€ ä»£ç å—</span><br><span class="line">æ— å‚æ„é€ å™¨</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨<code>new</code>æ¥å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨é™æ€ä»£ç å—ï¼Œå†è°ƒç”¨åŠ¨æ€ä»£ç å—ï¼Œå†æ ¹æ®ä¸åŒçš„å®ä¾‹åŒ–æ–¹æ³•è°ƒç”¨ä¸åŒçš„æ„é€ å™¨</p>
<h5 id="åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•"><a href="#åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•" class="headerlink" title="åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•"></a>åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Dog.staticAction();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é™æ€ä»£ç å—</span><br><span class="line">é™æ€æ–¹æ³•</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å½“æˆ‘ä»¬ä¸å®ä¾‹åŒ–å¯¹è±¡ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œä¼šå…ˆè°ƒç”¨ç±»ä¸­çš„é™æ€ä»£ç å—ï¼Œç„¶åè°ƒç”¨é™æ€æ–¹æ³•</p>
<h5 id="åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼"><a href="#åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼" class="headerlink" title="åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼"></a>åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Dog.staticVar = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é™æ€ä»£ç å—</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å¯¹é™æ€æˆå‘˜å˜é‡èµ‹å€¼å‰ï¼Œä¼šè°ƒç”¨é™æ€ä»£ç å—</p>
<h5 id="åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»"><a href="#åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»" class="headerlink" title="åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»"></a>åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> Dog.class;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰è¾“å‡ºä»»ä½•ä¸œè¥¿</p>
<h5 id="åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»"><a href="#åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»" class="headerlink" title="åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»"></a>åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException&#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.Dog&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å° </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é™æ€ä»£ç å—</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">&quot;com.Dog&quot;</span>, <span class="literal">true</span>, ClassLoader.getSystemClassLoader());</span><br><span class="line"><span class="comment">// æ‰“å°â€œé™æ€ä»£ç å—â€</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.Dog&quot;</span>, <span class="literal">false</span>, ClassLoader.getSystemClassLoader());</span><br><span class="line"><span class="comment">// æ²¡æœ‰æ‰“å° å› ä¸ºè¿™ä¸ªé€šè¿‡falseæ§åˆ¶åªåŠ è½½ï¼Œæ²¡æœ‰åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure>

<h4 id="åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶"><a href="#åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶" class="headerlink" title="åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶"></a>åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶</h4><p><code>URLClassLoader</code> å®é™…ä¸Šæ˜¯æˆ‘ä»¬å¹³æ—¶é»˜è®¤ä½¿ç”¨çš„ <code>AppClassLoader</code> çš„çˆ¶ç±»ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬è§£é‡Š <code>URLClassLoader</code> çš„å·¥ä½œè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯åœ¨è§£é‡Šé»˜è®¤çš„ <code>Java </code>ç±»åŠ è½½å™¨çš„å·¥ä½œæµç¨‹ã€‚</p>
<p>å…ˆæ–°å»ºä¸€ä¸ªcalcç±»ï¼Œæ³¨æ„è¿™é‡Œæ²¡æœ‰å£°æ˜Calcå†å“ªä¸ªåŒ…ï¼Œå°±æ˜¯è‡ªç”±çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calc</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Runtime.getRuntime().exec(<span class="string">&quot;open -a Calculator&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ„å»ºç”ŸæˆCalc.classæ–‡ä»¶ï¼ŒæŠŠå®ƒæ”¾åœ¨ç›®å½•ä¸‹</p>
<h5 id="fileåè®®"><a href="#fileåè®®" class="headerlink" title="fileåè®®"></a>fileåè®®</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com;</span><br><span class="line"></span><br><span class="line">import java.net.MalformedURLException;</span><br><span class="line">import java.net.URL;</span><br><span class="line">import java.net.URLClassLoader;</span><br><span class="line"></span><br><span class="line">public class URLLoader &#123;</span><br><span class="line">    public static void main(String[] args) throws MalformedURLException, ClassNotFoundException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        URLClassLoader urlClassLoader = new URLClassLoader(new URL[]&#123;new URL(&quot;file:///Users/lingtian/Downloads/&quot;)&#125;);</span><br><span class="line">        Class calc = urlClassLoader.loadClass(&quot;Calc&quot;);</span><br><span class="line">        calc.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="httpåè®®"><a href="#httpåè®®" class="headerlink" title="httpåè®®"></a>httpåè®®</h5><p>åœ¨Clac.classæ‰€åœ¨ç›®å½•å¼€ä¸€ä¸ªhttpæœåŠ¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLClassLoader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">URLLoader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MalformedURLException, ClassNotFoundException, InstantiationException, IllegalAccessException &#123;</span><br><span class="line">        <span class="type">URLClassLoader</span> <span class="variable">urlClassLoader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URLClassLoader</span>(<span class="keyword">new</span> <span class="title class_">URL</span>[]&#123;<span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://localhost:8000/&quot;</span>)&#125;);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">calc</span> <span class="operator">=</span> urlClassLoader.loadClass(<span class="string">&quot;Calc&quot;</span>);</span><br><span class="line">        calc.newInstance();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨è¿™è¾¹ä¹Ÿå¯ä»¥çœ‹åˆ°æ¥æ”¶åˆ°è¯·æ±‚</p>
<p><img   src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/20250214154610.png" ></p>
<h5 id="jar-file"><a href="#jar-file" class="headerlink" title="jar+file"></a>jar+file</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jar -cvf Calc.jar Clac.class</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆä¸€ä¸ªjaræ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">URLClassLoader</span> <span class="variable">urlClassLoader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URLClassLoader</span>(<span class="keyword">new</span> <span class="title class_">URL</span>[]&#123;<span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;jar:file:///Users/lingtian/Downloads/Calc.jar!/&quot;</span>)&#125;);</span><br><span class="line"><span class="type">Class</span> <span class="variable">calc</span> <span class="operator">=</span> urlClassLoader.loadClass(<span class="string">&quot;Calc&quot;</span>);</span><br><span class="line">calc.newInstance();</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯è°ƒç”¨å‰é¢å¤šä¸€ä¸ªjar:ï¼Œæ€»ä½“é€»è¾‘æ˜¯ä¸€æ ·çš„ï¼Œè¦æ³¨æ„åŒ…å£°æ˜çš„ä½ç½®ï¼Œéœ€è¦å¯¹å¾—ä¸Š</p>
<h5 id="jar-http"><a href="#jar-http" class="headerlink" title="jar+http"></a>jar+http</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">URLClassLoader</span> <span class="variable">urlClassLoader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URLClassLoader</span>(<span class="keyword">new</span> <span class="title class_">URL</span>[]&#123;<span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;jar:http://127.0.0.1:8000/Calc.jar!/&quot;</span>)&#125;);</span><br><span class="line"><span class="type">Class</span> <span class="variable">calc</span> <span class="operator">=</span> urlClassLoader.loadClass(<span class="string">&quot;Calc&quot;</span>);</span><br><span class="line">calc.newInstance();</span><br></pre></td></tr></table></figure>

<h4 id="åˆ©ç”¨-ClassLoader-defineClass-ç›´æ¥åŠ è½½å­—èŠ‚ç "><a href="#åˆ©ç”¨-ClassLoader-defineClass-ç›´æ¥åŠ è½½å­—èŠ‚ç " class="headerlink" title="åˆ©ç”¨ ClassLoader#defineClass ç›´æ¥åŠ è½½å­—èŠ‚ç "></a>åˆ©ç”¨ ClassLoader#defineClass ç›´æ¥åŠ è½½å­—èŠ‚ç </h4><p>é»˜è®¤çš„ClassLoader#defineClassæ–¹æ³•æ˜¯nativeï¼Œé€»è¾‘åœ¨JVMé‡Œé¢çš„Cè¯­è¨€</p>
<p>çœ‹ä¸€ä¸‹defineclassçš„è°ƒç”¨æ¨¡å¼ï¼Œnameå°±æ˜¯ç±»åï¼Œbä¸ºå­—èŠ‚ç æ•°ç»„ï¼Œoffä¸ºåç§»é‡ï¼Œlenä¸ºå­—èŠ‚ç é•¿åº¦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Class&lt;?&gt; defineClass(String name, <span class="type">byte</span>[] b, <span class="type">int</span> off, <span class="type">int</span> len)</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæ˜¯ä¿æŠ¤çš„å±æ€§ï¼Œæ— æ³•åœ¨å¤–éƒ¨ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åå°„è°ƒç”¨<code>defineClass()</code> æ–¹æ³•è¿›è¡Œå­—èŠ‚ç çš„åŠ è½½</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">URLLoaderTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader(); <span class="comment">// è·å–ç³»ç»Ÿçš„ç±»åŠ è½½å™¨</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> ClassLoader.class.getDeclaredMethod(<span class="string">&quot;defineClass&quot;</span>, String.class, <span class="type">byte</span>[].class, <span class="type">int</span>.class, <span class="type">int</span>.class);<span class="comment">// é€šè¿‡åå°„è·å–åˆ°defineæ–¹æ³•</span></span><br><span class="line">        method.setAccessible(<span class="literal">true</span>); <span class="comment">// è®¾ç½®è®¿é—®æƒé™</span></span><br><span class="line">        <span class="type">byte</span>[] code = Files.readAllBytes(Paths.get(<span class="string">&quot;/Users/lingtian/Downloads/Calc.class&quot;</span>)); <span class="comment">// è·å–å­—èŠ‚ç æ•°ç»„</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> (Class) method.invoke(classLoader, <span class="string">&quot;Calc&quot;</span>, code, <span class="number">0</span>, code.length); <span class="comment">// æŒ‰ç…§defineclassçš„è°ƒç”¨è¦æ±‚ä¾æ¬¡ä¼ å…¥å‚æ•°ã€‚ç„¶ååŠ è½½å‡ºç±»ç»™cï¼Œå…¶å®ä¹Ÿå°±æ˜¯Calcç±»</span></span><br><span class="line">        c.newInstance(); <span class="comment">// å®ç°å®ä¾‹åŒ–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>ClassLoader#defineClass</code>ç›´æ¥åŠ è½½å­—èŠ‚ç æœ‰ä¸ªä¼˜ç‚¹å°±æ˜¯ä¸éœ€è¦å‡ºç½‘ä¹Ÿå¯ä»¥åŠ è½½å­—èŠ‚ç ã€‚</p>
<h4 id="åˆ©ç”¨Unsafe-åŠ è½½å­—èŠ‚ç "><a href="#åˆ©ç”¨Unsafe-åŠ è½½å­—èŠ‚ç " class="headerlink" title="åˆ©ç”¨Unsafe åŠ è½½å­—èŠ‚ç "></a>åˆ©ç”¨Unsafe åŠ è½½å­—èŠ‚ç </h4><p>Unsafeä¹Ÿæœ‰defineClass()ï¼Œæœ¬è´¨å’Œä¸Šä¸€ä¸ªå·®ä¸å¤š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException, NoSuchFieldException &#123;</span><br><span class="line">        <span class="type">byte</span>[] code = Files.readAllBytes(Paths.get(<span class="string">&quot;/Users/lingtian/Downloads/Calc.class&quot;</span>));</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line"></span><br><span class="line">        Class&lt;Unsafe&gt; unsafeClass = Unsafe.class;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">unsafeField</span> <span class="operator">=</span> unsafeClass.getDeclaredField(<span class="string">&quot;theUnsafe&quot;</span>);</span><br><span class="line">        unsafeField.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Unsafe</span> <span class="variable">classUnsafe</span> <span class="operator">=</span> (Unsafe) unsafeField.get(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Method</span> <span class="variable">defineClassMethod</span> <span class="operator">=</span> unsafeClass.getMethod(<span class="string">&quot;defineClass&quot;</span>, String.class, <span class="type">byte</span>[].class,<span class="type">int</span>.class, <span class="type">int</span>.class, ClassLoader.class, ProtectionDomain.class);</span><br><span class="line">        <span class="type">Class</span> <span class="variable">cc</span> <span class="operator">=</span> (Class) defineClassMethod.invoke(classUnsafe, <span class="string">&quot;Calc&quot;</span>, code, <span class="number">0</span>, code.length, classLoader, <span class="literal">null</span>);</span><br><span class="line">        cc.newInstance();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="TemplatesImplåŠ è½½å­—èŠ‚ç "><a href="#TemplatesImplåŠ è½½å­—èŠ‚ç " class="headerlink" title="TemplatesImplåŠ è½½å­—èŠ‚ç "></a>TemplatesImplåŠ è½½å­—èŠ‚ç </h4><h5 id="ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª"></a>ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª</h5><p>ä¸ºä»€ä¹ˆç”¨è¿™ä¸ªï¼šåœ¨å®é™…åœºæ™¯ä¸­ï¼Œå› ä¸ºdefineClassæ–¹æ³•ä½œç”¨åŸŸå´æ˜¯ä¸å¼€æ”¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå¾ˆéš¾ç›´æ¥åˆ©ç”¨åˆ°å®ƒï¼Œä½†æ˜¯æˆ‘ä»¬çš„TemplatesImplé‡Œçš„ä½œç”¨åŸŸæ˜¯default</p>
<p>ç›®æ ‡ï¼Œè°ƒç”¨åˆ°é‡Œé¢çš„TemplatesImplæœ‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼ŒTransletClassLoaderï¼Œé‡Œé¢è°ƒç”¨äº†defineClassæ–¹æ³•ï¼ˆé‡å†™ï¼‰ï¼Œè€Œä¸”è¿™ä¸ªå†…éƒ¨ç±»ç»§æ‰¿äº†ClassLoaderï¼Œè€Œä¸”è¿™ä¸ªé‡å†™çš„defineClassæ–¹æ³•æ²¡æœ‰å†™æ˜ä½œç”¨åŸŸï¼Œå°±é»˜è®¤æ˜¯defaultï¼Œæ‰€ä»¥å¯ä»¥è¢«ç±»å¤–éƒ¨è°ƒç”¨</p>
<p><img   src="https://cdn.jsdelivr.net/gh/lintian31/blog-image/blog-image/image-20241125205755573.png" ></p>
<h5 id="è°ƒç”¨é“¾"><a href="#è°ƒç”¨é“¾" class="headerlink" title="è°ƒç”¨é“¾"></a>è°ƒç”¨é“¾</h5><p>ç¡®å®šäº†ç›®æ ‡ï¼Œæ¥ä¸‹æ¥ç¡®å®šä¸€ä¸‹è°ƒç”¨é“¾</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TransletClassLoader#defineClass()</span><br><span class="line">	-&gt; TemplatesImpl#defineTransletClasses()</span><br><span class="line">	 -&gt; TemplatesImpl#getTransletInstance()</span><br><span class="line">	 	-&gt; TemplatesImpl#newTransformer()</span><br><span class="line">	 		-&gt; TemplatesImpl#getOutputProperties()</span><br></pre></td></tr></table></figure>

<p>å€’æ¨å‰é¢ä¸€ä¸¤ä¸ªå±æ€§éƒ½æ˜¯privateï¼Œç›´åˆ°newTransformerå’ŒgetOutputPropertiesæ‰æ˜¯public</p>
<h5 id="æ³¨æ„ç‚¹1"><a href="#æ³¨æ„ç‚¹1" class="headerlink" title="æ³¨æ„ç‚¹1"></a>æ³¨æ„ç‚¹1</h5><p>è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹ï¼Œå°±æ˜¯åœ¨æ‰¾defineTransletClassesä¸Šä¸€ä¸ªè°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æœ‰ä¸‰ä¸ª</p>
<p>ä½†æ˜¯è¿™é‡ŒgetTransletClasses()å’Œ getTransletIndex() éƒ½åœ¨è°ƒç”¨defineTransletClasses()åæ²¡åˆ«çš„åŠ¨ä½œï¼Œé‚£ä¹ˆæœ€ååŠ è½½çš„ç±»å°±æ— æ³•è¢«å®ä¾‹åŒ–&#x2F;åˆå§‹åŒ–</p>
<p>å’±ä»¬getTransletInstance()åœ¨å–å¾—äº†_classåä¼šå¯¹æ•°ç»„é‡Œé¢å¯¹åº”çš„é˜Ÿå½¢è¿›è¡Œ<strong>æ— å‚æ•°</strong>åˆå§‹åŒ–ï¼Œæ»¡è¶³äº†æˆ‘ä»¬çš„è¦æ±‚</p>
<h5 id="poc"><a href="#poc" class="headerlink" title="poc"></a>poc</h5><p>ç¡®å®šäº†è°ƒç”¨é“¾ï¼Œå…ˆæ„é€ ä¸€ä¸ªå‡†å¤‡è¢«è°ƒç”¨çš„ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.DOM;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.TransletException;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xml.internal.dtm.DTMAxisIterator;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xml.internal.serializer.SerializationHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TemplatesImpl çš„å­—èŠ‚ç æ„é€ </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TemplatesBytes</span> <span class="keyword">extends</span> <span class="title class_">AbstractTranslet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TemplatesBytes</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123; <span class="comment">// æ„é€ æ–¹æ³•ï¼Œæ¯æ¬¡åŠ è½½ç±»çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨</span></span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello TemplatesBytes&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transform</span><span class="params">(DOM document, SerializationHandler[] handlers)</span> <span class="keyword">throws</span> TransletException &#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transform</span><span class="params">(DOM document, DTMAxisIterator iterator, SerializationHandler handler)</span> <span class="keyword">throws</span> TransletException &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¿™ä¸ªç±»éœ€è¦ç»§æ‰¿<code>com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet</code></p>
<p>ç„¶åå› ä¸ºAbstractTransletè¿™ä¸ªç±»é‡Œé¢æœ‰ä¸€äº›æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦é‡å†™ï¼Œç„¶åå°±ç›´æ¥å†™æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œè¿™é‡Œæ§åˆ¶æ‰“å°ä¸€ä¸‹å°±å¥½</p>
<p><strong>POCï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Files;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»ç¨‹åº</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TemplatesRce</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">byte</span>[] code = Files.readAllBytes(Paths.get(<span class="string">&quot;/Users/lingtian/Downloads/TemplatesBytes.class&quot;</span>));</span><br><span class="line">        <span class="type">TemplatesImpl</span> <span class="variable">templates</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TemplatesImpl</span>();</span><br><span class="line">        setFieldValue(templates, <span class="string">&quot;_name&quot;</span>, <span class="string">&quot;Calc&quot;</span>);</span><br><span class="line">        setFieldValue(templates, <span class="string">&quot;_bytecodes&quot;</span>, <span class="keyword">new</span> <span class="title class_">byte</span>[][] &#123;code&#125;);</span><br><span class="line">        setFieldValue(templates, <span class="string">&quot;_tfactory&quot;</span>, <span class="keyword">new</span> <span class="title class_">TransformerFactoryImpl</span>());</span><br><span class="line">        templates.getOutputProperties();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setFieldValue</span><span class="params">(Object obj, String fieldName, Object value)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> obj.getClass().getDeclaredField(fieldName);</span><br><span class="line">        field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        field.set(obj, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>setFieldValue</code>è¿™ä¸ªå¥½é«˜æ˜ï¼Œç›´æ¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œé¿å…å†—ä½™ï¼Œä¸»è¦é€»è¾‘å°±æ˜¯è·å–æˆå‘˜å˜é‡ç„¶åä¿®æ”¹é‡Œé¢çš„å€¼å°±å¥½</p>
<h5 id="æ³¨æ„ç‚¹2"><a href="#æ³¨æ„ç‚¹2" class="headerlink" title="æ³¨æ„ç‚¹2"></a>æ³¨æ„ç‚¹2</h5><p>é“¾å­ä¸€å¼€å§‹å¯ä»¥æ˜¯newTransformer()ä¹Ÿå¯ä»¥æ˜¯getOutputProperties()ï¼Œå› ä¸ºéƒ½æ˜¯publicï¼Œå¤šä¸€ä¸ªgetOutputPropertieså»è°ƒç”¨ä¹Ÿæ²¡ä»€ä¹ˆå½±å“ï¼Œç›´æ¥newTransformerä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸ç”¨çº ç»“è¿™ä¸ªï¼Œç›´æ¥ä¿®æ”¹ä»£ç é‡Œé¢çš„è¿™ä¸ªå°±è¡Œ</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p>bç«™ï¼šç™½æ—¥æ¢¦ç»„é•¿</p>
<p><a class="link"   target="_blank" rel="noopener" href="https://drun1baby.top/2022/06/03/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80%E7%AF%87-05-%E7%B1%BB%E7%9A%84%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD/" >https://drun1baby.top/2022/06/03/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E7%A1%80%E7%AF%87-05-%E7%B1%BB%E7%9A%84%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD/<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://exp10it.io/2022/11/java-classloader/" >https://exp10it.io/2022/11/java-classloader/<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://xz.aliyun.com/news/8556" >https://xz.aliyun.com/news/8556<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/260902" >https://www.anquanke.com/post/id/260902<i class="fas fa-external-link-alt"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/hollischuang/p/14260801.html" >https://www.cnblogs.com/hollischuang/p/14260801.html<i class="fas fa-external-link-alt"></i></a></p>

                </div>
                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/java/">java</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">å­¦ä¹ ç¬”è®°</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2025/02/18/cc3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                                   title="cc3å­¦ä¹ ç¬”è®°"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">cc3å­¦ä¹ ç¬”è®°</span>
                                        <span class="post-nav-item">ä¸Šä¸€ç¯‡</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2025/02/09/cc6%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"
                                   title="cc6å­¦ä¹ ç¬”è®°"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">cc6å­¦ä¹ ç¬”è®°</span>
                                        <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    


    <div class="comments-container border-box">
        <div id="comments-anchor" class="comment-area-title border-box">
            <i class="fas fa-comments"></i>&nbsp;è¯„è®º
        </div>
        <div class="comment-plugin-fail border-box">
    <span class="fail-tip">è¯„è®ºæ’ä»¶åŠ è½½å¤±è´¥</span>
    <button class="reload keep-button">ç‚¹å‡»é‡æ–°åŠ è½½</button>
</div>
<div class="comment-plugin-loading flex-center border-box">
    <i class="loading-icon fa-solid fa-spinner fa-spin"></i>
    <span class="load-tip">æ­£åœ¨åŠ è½½è¯„è®ºæ’ä»¶</span>
</div>
<script data-pjax>
  window.KeepCommentPlugin = {}
  window.KeepCommentPlugin.hideLoading = () => {
    const cplDom = document.querySelector('.comments-container .comment-plugin-loading')
    cplDom.style.display = 'none'
  }
  window.KeepCommentPlugin.loadFailHandle = () => {
    window.KeepCommentPlugin.hideLoading()
    const cpfDom = document.querySelector('.comments-container .comment-plugin-fail')
    cpfDom.style.display = 'flex'
    cpfDom.querySelector('.reload').addEventListener('click', () => {
      window.location.reload()
    })
  }
</script>

        
            

    <div class="valine-container">
        <div id="vcomments"></div>
        <script 
                src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"
                async
                onerror="window.KeepCommentPlugin.loadFailHandle()"
        ></script>
        <script 
                async
                onerror="window.KeepCommentPlugin.loadFailHandle()"
        >
          window.KeepCommentPlugin.initValine = () => {
            const config = {
              el: '#vcomments',
              appId: 'E3FHp0QEVFhY7p13mQXePdYC-gzGzoHsz',
              appKey: 'hJxnDaGeKNxkzn9GLQS6pJD4',
              meta: ['nick', 'mail', 'link'],
              avatar: 'wavatar',
              enableQQ: true,
              placeholder: 'ç•™ä¸‹ä½ çš„è¯„è®ºï½',
              lang: 'zh-CN'.toLowerCase()
            }

            if ('') {
              config.serverURLs = ''
            }

            if (window?.Valine) {
              new Valine(config)
              window.KeepCommentPlugin.hideLoading()
            } else {
              setTimeout(() => {
                window.KeepCommentPlugin.initValine()
              }, 1000)
            }
          }

          if ('false' === 'true') {
            setTimeout(() => {
              window.KeepCommentPlugin.initValine()
            }, 1200)
          } else {
            window.addEventListener('DOMContentLoaded', window.KeepCommentPlugin.initValine)
          }
        </script>
    </div>


        
    </div>





                
            </div>
        </div>

        
            <div class="pc-post-toc right-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="nav-number">2.</span> <span class="nav-text">Javaç±»åŠ è½½æœºåˆ¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%A0%E4%B8%AA%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">3.</span> <span class="nav-text">å‡ ä¸ªç±»åŠ è½½å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#BootstrapClassLoader"><span class="nav-number">3.1.</span> <span class="nav-text">BootstrapClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ExtensionsClassLoader"><span class="nav-number">3.2.</span> <span class="nav-text">ExtensionsClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#AppClassLoader"><span class="nav-number">3.3.</span> <span class="nav-text">AppClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#UserDefineClassLoader"><span class="nav-number">3.4.</span> <span class="nav-text">UserDefineClassLoader</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6"><span class="nav-number">4.</span> <span class="nav-text">åŒäº²å§”æ´¾æœºåˆ¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E4%B8%8B%E4%BB%A3%E7%A0%81%E5%9D%97%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="nav-number">5.</span> <span class="nav-text">ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%80%EF%BC%9A%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.1.</span> <span class="nav-text">åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%8C%EF%BC%9A%E8%B0%83%E7%94%A8%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">5.2.</span> <span class="nav-text">åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%89%EF%BC%9A%E5%AF%B9%E7%B1%BB%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E8%B5%8B%E5%80%BC"><span class="nav-number">5.3.</span> <span class="nav-text">åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E5%9B%9B%EF%BC%9A%E4%BD%BF%E7%94%A8class%E8%8E%B7%E5%8F%96%E7%B1%BB"><span class="nav-number">5.4.</span> <span class="nav-text">åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%94%EF%BC%9A%E4%BD%BF%E7%94%A8forName%E8%8E%B7%E5%8F%96%E7%B1%BB"><span class="nav-number">5.5.</span> <span class="nav-text">åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8URLClassLoader%E5%8A%A0%E8%BD%BDclass%E6%96%87%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#file%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.1.</span> <span class="nav-text">fileåè®®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.2.</span> <span class="nav-text">httpåè®®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jar-file"><span class="nav-number">6.3.</span> <span class="nav-text">jar+file</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jar-http"><span class="nav-number">6.4.</span> <span class="nav-text">jar+http</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-ClassLoader-defineClass-%E7%9B%B4%E6%8E%A5%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">åˆ©ç”¨ ClassLoader#defineClass ç›´æ¥åŠ è½½å­—èŠ‚ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8Unsafe-%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">8.</span> <span class="nav-text">åˆ©ç”¨Unsafe åŠ è½½å­—èŠ‚ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TemplatesImpl%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">9.</span> <span class="nav-text">TemplatesImplåŠ è½½å­—èŠ‚ç </span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E8%BF%99%E4%B8%AA"><span class="nav-number">9.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE"><span class="nav-number">9.2.</span> <span class="nav-text">è°ƒç”¨é“¾</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B91"><span class="nav-number">9.3.</span> <span class="nav-text">æ³¨æ„ç‚¹1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#poc"><span class="nav-number">9.4.</span> <span class="nav-text">poc</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B92"><span class="nav-number">9.5.</span> <span class="nav-text">æ³¨æ„ç‚¹2</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">10.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="border-box website-info-box default">
        
            <div class="copyright-info info-item default">
                &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2025
                
                    &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">Flow</a>
                
            </div>

            <div class="theme-info info-item default">
                ç”±&nbsp;<a target="_blank" href="https://hexo.io">Hexo</a>&nbsp;é©±åŠ¨&nbsp;&&nbsp;ä¸»é¢˜&nbsp;<a class="keep-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep</a>
            </div>

            

            
        

        <div class="count-item info-item default">
            

            

            
        </div>
    </div>
</footer>

        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- PC go comment -->
        
            <li class="tools-item flex-center go-to-comments">
                <i class="fas fa-comment"></i>
                <span class="post-comments-count"></span>
            </li>
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        
            <li class="tools-item toggle-show-toc-tablet flex-center">
                <i class="fas fa-list"></i>
            </li>
        

        
            <li class="tools-item go-to-comments-tablet flex-center">
                <i class="fas fa-comment"></i>
            </li>
        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
        <div class="tablet-post-toc-mask">
            <div class="tablet-post-toc">
                <div class="post-toc-wrap border-box">
    <div class="post-toc border-box">
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Java%E7%B1%BB%E5%8A%A0%E8%BD%BD%E6%9C%BA%E5%88%B6"><span class="nav-number">2.</span> <span class="nav-text">Javaç±»åŠ è½½æœºåˆ¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%87%A0%E4%B8%AA%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">3.</span> <span class="nav-text">å‡ ä¸ªç±»åŠ è½½å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#BootstrapClassLoader"><span class="nav-number">3.1.</span> <span class="nav-text">BootstrapClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ExtensionsClassLoader"><span class="nav-number">3.2.</span> <span class="nav-text">ExtensionsClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#AppClassLoader"><span class="nav-number">3.3.</span> <span class="nav-text">AppClassLoader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#UserDefineClassLoader"><span class="nav-number">3.4.</span> <span class="nav-text">UserDefineClassLoader</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6"><span class="nav-number">4.</span> <span class="nav-text">åŒäº²å§”æ´¾æœºåˆ¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E4%B8%8B%E4%BB%A3%E7%A0%81%E5%9D%97%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="nav-number">5.</span> <span class="nav-text">ä¸åŒåœºæ™¯ä¸‹ä»£ç å—åŠ è½½é¡ºåº</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%80%EF%BC%9A%E5%AE%9E%E4%BE%8B%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.1.</span> <span class="nav-text">åœºæ™¯ä¸€ï¼šå®ä¾‹åŒ–å¯¹è±¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%8C%EF%BC%9A%E8%B0%83%E7%94%A8%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">5.2.</span> <span class="nav-text">åœºæ™¯äºŒï¼šè°ƒç”¨é™æ€æ–¹æ³•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%B8%89%EF%BC%9A%E5%AF%B9%E7%B1%BB%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E8%B5%8B%E5%80%BC"><span class="nav-number">5.3.</span> <span class="nav-text">åœºæ™¯ä¸‰ï¼šå¯¹ç±»ä¸­çš„é™æ€æˆå‘˜èµ‹å€¼</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E5%9B%9B%EF%BC%9A%E4%BD%BF%E7%94%A8class%E8%8E%B7%E5%8F%96%E7%B1%BB"><span class="nav-number">5.4.</span> <span class="nav-text">åœºæ™¯å››ï¼šä½¿ç”¨classè·å–ç±»</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BA%94%EF%BC%9A%E4%BD%BF%E7%94%A8forName%E8%8E%B7%E5%8F%96%E7%B1%BB"><span class="nav-number">5.5.</span> <span class="nav-text">åœºæ™¯äº”ï¼šä½¿ç”¨forNameè·å–ç±»</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8URLClassLoader%E5%8A%A0%E8%BD%BDclass%E6%96%87%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">åˆ©ç”¨URLClassLoaderåŠ è½½classæ–‡ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#file%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.1.</span> <span class="nav-text">fileåè®®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#http%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.2.</span> <span class="nav-text">httpåè®®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jar-file"><span class="nav-number">6.3.</span> <span class="nav-text">jar+file</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jar-http"><span class="nav-number">6.4.</span> <span class="nav-text">jar+http</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-ClassLoader-defineClass-%E7%9B%B4%E6%8E%A5%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">7.</span> <span class="nav-text">åˆ©ç”¨ ClassLoader#defineClass ç›´æ¥åŠ è½½å­—èŠ‚ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8Unsafe-%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">8.</span> <span class="nav-text">åˆ©ç”¨Unsafe åŠ è½½å­—èŠ‚ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#TemplatesImpl%E5%8A%A0%E8%BD%BD%E5%AD%97%E8%8A%82%E7%A0%81"><span class="nav-number">9.</span> <span class="nav-text">TemplatesImplåŠ è½½å­—èŠ‚ç </span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E8%BF%99%E4%B8%AA"><span class="nav-number">9.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ª</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE"><span class="nav-number">9.2.</span> <span class="nav-text">è°ƒç”¨é“¾</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B91"><span class="nav-number">9.3.</span> <span class="nav-text">æ³¨æ„ç‚¹1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#poc"><span class="nav-number">9.4.</span> <span class="nav-text">poc</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B92"><span class="nav-number">9.5.</span> <span class="nav-text">æ³¨æ„ç‚¹2</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">10.</span> <span class="nav-text">å‚è€ƒ</span></a></li></ol>
    </div>
</div>

            </div>
        </div>
    
</main>



<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="">
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        
            
<script src="/js/post/toc.js"></script>

        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
